<Window x:Class="FakerHEM.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:FakerHEM.ViewModels"
        Title="FakerHEM" Height="800" Width="1200">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="400" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!-- Левая панель -->
        <StackPanel Grid.Column="0" Background="LightGray">
            <Button Content="Load Project" Command="{Binding LoadProjectCommand}" Margin="10" />
            <ItemsControl ItemsSource="{Binding Plans}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Margin="5">
                            <CheckBox IsChecked="{Binding IsVisible}" Content="{Binding Name}" />
                            <CheckBox IsChecked="{Binding ShowUpper}" Content="Upper" Margin="10,0,0,0" />
                            <CheckBox IsChecked="{Binding ShowLower}" Content="Lower" Margin="10,0,0,0" />
                        </StackPanel>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </StackPanel>

        <!-- Canvas -->
        <Canvas Grid.Column="1" Background="White" 
                MouseLeftButtonDown="Canvas_MouseLeftButtonDown" 
                MouseLeftButtonUp="Canvas_MouseLeftButtonDown"
                MouseWheel="Canvas_MouseWheel" 
                MouseMove="Canvas_MouseMove">
            <ItemsControl ItemsSource="{Binding Plans}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <Canvas />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Canvas>
                            <Polyline Points="{Binding UpperPoints, Converter={StaticResource PointsConverter}}" 
                          Stroke="{Binding UpperColor}" 
                          StrokeThickness="2" 
                          Visibility="{Binding ShowUpper, Converter={StaticResource BooleanToVisibilityConverter}}" />
                            <Polyline Points="{Binding LowerPoints, Converter={StaticResource PointsConverter}}" 
                          Stroke="{Binding LowerColor}" 
                          StrokeThickness="2" 
                          Visibility="{Binding ShowLower, Converter={StaticResource BooleanToVisibilityConverter}}" />
                        </Canvas>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
            <Ellipse Width="20" Height="20" Fill="Red"
                     Canvas.Left="{Binding Circle.X, Mode=TwoWay}"
                     Canvas.Top="{Binding Circle.Y, Mode=TwoWay}"
                     Panel.ZIndex="100" />
        </Canvas>
    </Grid>
</Window>